# Development Dockerfile for Next.js
FROM node:20-alpine

WORKDIR /app

# Enable Corepack for Yarn version management
RUN corepack enable

# Copy package files
COPY package*.json ./
COPY yarn.lock* package-lock.json* ./

# Install dependencies (prefer yarn if yarn.lock exists, otherwise npm)
RUN if [ -f yarn.lock ]; then \
      yarn install; \
    elif [ -f package-lock.json ]; then \
      npm ci; \
    else \
      npm install; \
    fi

# Copy application files
COPY . .

EXPOSE 8000

ENV PORT=8000
ENV HOSTNAME="0.0.0.0"

CMD ["npm", "run", "dev"]

