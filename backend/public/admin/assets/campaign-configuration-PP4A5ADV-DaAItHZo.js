import{K as f}from"./chunk-6HTZNHPT-Csr_akN5.js";import{b as n,u as p}from"./chunk-AERWK3TJ-CNLguJZW.js";import{b as j,ah as C,e1 as y,j as s,H as _,aE as b,aF as v,ay as F,ee as S,t as u,J as e,bO as m,B as x,e5 as h}from"./index-DoJewMqP.js";var E=F({starts_at:h().nullable(),ends_at:h().nullable()}),w=({campaign:a})=>{const{t}=j(),{handleSuccess:o}=p(),r=b({defaultValues:{starts_at:a.starts_at?new Date(a.starts_at):void 0,ends_at:a.ends_at?new Date(a.ends_at):void 0},resolver:v(E)}),{mutateAsync:l,isPending:c}=S(a.id),g=r.handleSubmit(async i=>{await l({starts_at:i.starts_at||null,ends_at:i.ends_at||null},{onSuccess:({campaign:d})=>{u.success(t("campaigns.configuration.edit.successToast",{name:d.name})),o()},onError:d=>{u.error(d.message)}})});return s.jsx(n.Form,{form:r,children:s.jsxs(f,{onSubmit:g,className:"flex flex-1 flex-col",children:[s.jsx(n.Body,{children:s.jsxs("div",{className:"flex flex-col gap-y-4",children:[s.jsx(e.Field,{control:r.control,name:"starts_at",render:({field:i})=>s.jsxs(e.Item,{children:[s.jsx(e.Label,{children:t("campaigns.fields.start_date")}),s.jsx(e.Control,{children:s.jsx(m,{granularity:"minute",hourCycle:12,shouldCloseOnSelect:!1,...i})}),s.jsx(e.ErrorMessage,{})]})}),s.jsx(e.Field,{control:r.control,name:"ends_at",render:({field:i})=>s.jsxs(e.Item,{children:[s.jsx(e.Label,{children:t("campaigns.fields.end_date")}),s.jsx(e.Control,{children:s.jsx(m,{granularity:"minute",shouldCloseOnSelect:!1,...i})}),s.jsx(e.ErrorMessage,{})]})})]})}),s.jsx(n.Footer,{children:s.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[s.jsx(n.Close,{asChild:!0,children:s.jsx(x,{variant:"secondary",size:"small",children:t("actions.cancel")})}),s.jsx(x,{isLoading:c,type:"submit",variant:"primary",size:"small",children:t("actions.save")})]})})]})})},N=()=>{const{t:a}=j(),{id:t}=C(),{campaign:o,isLoading:r,isError:l,error:c}=y(t);if(l)throw c;return s.jsxs(n,{children:[s.jsxs(n.Header,{children:[s.jsx(n.Title,{asChild:!0,children:s.jsx(_,{children:a("campaigns.configuration.edit.header")})}),s.jsx(n.Description,{className:"sr-only",children:a("campaigns.configuration.edit.description")})]}),!r&&o&&s.jsx(w,{campaign:o})]})};export{N as Component};
