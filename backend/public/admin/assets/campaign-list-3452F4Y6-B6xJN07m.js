import{u as f}from"./chunk-IVZ6BMDB-BBXWWuWy.js";import{a as x,j as t,b as p,d$ as b,C as v,H as h,L as j,B as C,r as y,g as T,k as P,h as S,ea as _,A as w,P as k,T as A,t as u}from"./index-DByUhO00.js";import{u as E,_ as D}from"./chunk-PJ5EUKOB-BKdHp3yi.js";import{u as q}from"./chunk-C76H5USB-Q6dEWJyK.js";import"./chunk-FKIOYL3D-Bp0kuTda.js";import{S as L}from"./chunk-GIZFNLKK-BJkSQz15.js";import"./chunk-MSDRGCRR-CMC78RPS.js";import"./chunk-P3UUX2T6-ektrc5DO.js";import"./chunk-SJ3E4T6B-C9Otrdn9.js";import"./chunk-PFKKVLZX-BgTFYbvA.js";import"./chunk-HQKGZADC-Bk18sJzE.js";import"./chunk-EMIHDNB7-C1BsnKRM.js";import"./index-ezdbNVYE.js";import"./Trans-d-ZBmcR6.js";var N=({prefix:e,pageSize:a=20})=>{const s=q(["offset","q","order","created_at","updated_at"],e),{offset:r,q:i,order:o,created_at:n,updated_at:c}=s;return{searchParams:{limit:a,offset:r?Number(r):0,order:o,created_at:n?JSON.parse(n):void 0,updated_at:c?JSON.parse(c):void 0,q:i},raw:s}},d=20,O=()=>{const{t:e}=p(),{raw:a,searchParams:s}=N({pageSize:d}),{campaigns:r,count:i,isPending:o,isError:n,error:c}=b(s,{placeholderData:P}),l=B(),{table:g}=E({data:r??[],columns:l,count:i,enablePagination:!0,getRowId:m=>m.id,pageSize:d});if(n)throw c;return t.jsxs(v,{className:"divide-y p-0",children:[t.jsxs("div",{className:"flex items-center justify-between px-6 py-4",children:[t.jsx(h,{level:"h1",children:e("campaigns.domain")}),t.jsx(j,{to:"/campaigns/create",children:t.jsx(C,{size:"small",variant:"secondary",children:e("actions.create")})})]}),t.jsx(D,{table:g,columns:l,count:i,pageSize:d,pagination:!0,search:!0,navigateTo:m=>m.id,isLoading:o,queryObject:a,orderBy:[{key:"name",label:e("fields.name")},{key:"created_at",label:e("fields.createdAt")},{key:"updated_at",label:e("fields.updatedAt")}]})]})},z=({campaign:e})=>{const{t:a}=p(),s=S(),{mutateAsync:r}=_(e.id),i=async()=>{await s({title:a("general.areYouSure"),description:a("campaigns.deleteCampaignWarning",{name:e.name}),verificationInstruction:a("general.typeToConfirm"),verificationText:e.name,confirmText:a("actions.delete"),cancelText:a("actions.cancel")})&&await r(void 0,{onSuccess:()=>{u.success(a("campaigns.delete.successToast",{name:e.name}))},onError:n=>{u.error(n.message)}})};return t.jsx(w,{groups:[{actions:[{icon:t.jsx(k,{}),label:a("actions.edit"),to:`/campaigns/${e.id}/edit`}]},{actions:[{icon:t.jsx(A,{}),label:a("actions.delete"),onClick:i}]}]})},H=T(),B=()=>{const e=f();return y.useMemo(()=>[...e,H.display({id:"actions",cell:({row:a})=>t.jsx(z,{campaign:a.original})})],[e])},X=()=>{const{getWidgets:e}=x();return t.jsx(L,{widgets:{after:e("campaign.list.after"),before:e("campaign.list.before")},hasOutlet:!0,children:t.jsx(O,{})})};export{X as Component};
