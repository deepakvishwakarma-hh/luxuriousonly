import{V as c}from"./chunk-F6ZOHZVB-BkzqYFS8.js";import{C as x}from"./chunk-AHQI2S2Z-DTnojcBB.js";import{K as _}from"./chunk-6HTZNHPT-Csr_akN5.js";import{u as f,R as t}from"./chunk-AERWK3TJ-CNLguJZW.js";import{b as j,e4 as C,aE as v,aF as F,ay as o,t as u,j as e,B as m,e5 as d,aA as i,aB as T,aL as S}from"./index-DoJewMqP.js";var A={name:"",description:"",campaign_identifier:"",starts_at:null,ends_at:null,budget:{type:"usage",currency_code:null,limit:null,attribute:null}},E=o({name:i().min(1),description:i().optional(),campaign_identifier:i().min(1),starts_at:d().nullable(),ends_at:d().nullable(),budget:o({attribute:i().nullish(),limit:S().min(0).nullish(),type:T(["spend","usage","use_by_attribute"]),currency_code:i().nullish()})}),V=()=>{const{t:a}=j(),{handleSuccess:p}=f(),{mutateAsync:b,isPending:g}=C(),r=v({defaultValues:A,resolver:F(E)}),y=r.handleSubmit(async s=>{const l=s.budget.attribute||null,h=l?"use_by_attribute":s.budget.type;await b({name:s.name,description:s.description,campaign_identifier:s.campaign_identifier,starts_at:s.starts_at,ends_at:s.ends_at,budget:{type:h,attribute:l,limit:s.budget.limit?s.budget.limit:void 0,currency_code:s.budget.currency_code}},{onSuccess:({campaign:n})=>{u.success(a("campaigns.create.successToast",{name:n.name})),p(`/campaigns/${n.id}`)},onError:n=>{u.error(n.message)}})});return e.jsx(t.Form,{form:r,children:e.jsxs(_,{onSubmit:y,className:"flex size-full flex-col overflow-hidden",children:[e.jsxs(t.Header,{children:[e.jsx(t.Title,{asChild:!0,children:e.jsx(c,{children:a("campaigns.create.title")})}),e.jsx(t.Description,{asChild:!0,children:e.jsx(c,{children:a("campaigns.create.description")})})]}),e.jsx(t.Body,{className:"flex size-full flex-col items-center overflow-auto py-16",children:e.jsx(x,{form:r})}),e.jsx(t.Footer,{children:e.jsxs("div",{className:"flex items-center justify-end gap-x-2",children:[e.jsx(t.Close,{asChild:!0,children:e.jsx(m,{size:"small",variant:"secondary",children:a("actions.cancel")})}),e.jsx(m,{size:"small",variant:"primary",type:"submit",isLoading:g,children:a("actions.create")})]})})]})})};export{E as C,A as D,V as a};
